<div class="container mb-5">
    <h2 class="p-2">Teklifleri Karşılaştır</h2>
    <div class="grid">
    @for(count of bidsCountArray; track count) {
        <div class="col">
            Teklif {{count}} : Firma Adı ... <br/> Teklif no ..<br/>
        </div>
    }
</div>
</div>
@if(tableData) {
<div class="card sticky">
    <p-table [value]="tableData" [columns]="selectedColumns"  [reorderableColumns]="true" [tableStyle]="tableStyle" styleClass="p-datatable-striped p-datatable-sm"
    (onColReorder)="onColReorder($event)">
        <ng-template pTemplate="caption">
            <p-multiSelect 
                display="chip" 
                [options]="colNames" 
                [(ngModel)]="selectedColumns" 
                [style]="{'min-width': '200px'}" 
                placeholder="Gösterilecek Sütunları Seçiniz" />
        </ng-template>
        <ng-template pTemplate="header" let-colNames>
            <tr>
                @for(column of columns; track column; let i =$index) {
                    @if(column.isBirim || column.isToplam) {
                        <th [attr.colspan]="bidsCountArray.length+1"> {{column.header}} </th>
                    }
                    @else {
                         <!-- <th [pSortableColumn]="column.field">{{ i===0 ?  'Poz No' : column.header }}  
                            <p-sortIcon [field]="column.field"></p-sortIcon>
                        </th>  -->
                        <th colspan="1" > </th>
                    }
                    
                }
            </tr>
            <tr>
               @for(col of colNames; track col; ) {
                <th pReorderableColumn> {{ col==='key' ? 'Poz No' : col}}</th>
               }
            </tr>
            <tr>
                @for(col of visibleColNames; track col; ) {
                 <th> {{ col==='key' ? 'Poz No' : col}}</th>
                }
             </tr>
            
        </ng-template>
        
        <ng-template pTemplate="body" let-row let-columns="colNames">
            
            <tr>
                @for(col of colNames; track col) {
                    <td> {{row[col]}} </td>
                }
            </tr>
        </ng-template>
    </p-table>
</div>
 
}
